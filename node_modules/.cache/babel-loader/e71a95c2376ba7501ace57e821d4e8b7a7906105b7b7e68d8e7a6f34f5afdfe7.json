{"ast":null,"code":"import _objectSpread from\"/var/www/html/internal/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{DragDropContext,Droppable,Draggable}from'react-beautiful-dnd';import axios from'axios';import{useAuth}from'../../context/AuthContext';import'./InquiriesList.css';import{FiPlus,FiDownload,FiEdit,FiTrash2,FiEye,FiEyeOff,FiX,FiSettings,FiChevronUp,FiChevronDown}from'react-icons/fi';import InquiryForm from'./InquiryForm';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const InquiriesList=()=>{const{user}=useAuth();const[inquiries,setInquiries]=useState([]);const[fields,setFields]=useState([]);const[loading,setLoading]=useState(true);const[showForm,setShowForm]=useState(false);const[editingInquiry,setEditingInquiry]=useState(null);const[filters,setFilters]=useState({status:'',startDate:'',endDate:'',search:''});const[visibleFields,setVisibleFields]=useState([]);const[fieldOrder,setFieldOrder]=useState([]);const[showFieldsConfig,setShowFieldsConfig]=useState(false);const[standardColumns,setStandardColumns]=useState({id:true,client_name:true,client_email:true,client_phone:true,status:true,inquiry_date:true,actions:true});// Standard column order - default order\nconst standardColumnKeys=['id','client_name','client_email','client_phone','status','inquiry_date','actions'];const[standardColumnOrder,setStandardColumnOrder]=useState(standardColumnKeys);const[sortConfig,setSortConfig]=useState({column:null,direction:'asc'// 'asc' or 'desc'\n});useEffect(()=>{fetchInquiries();fetchFields();loadPreferences();},[]);useEffect(()=>{applyFilters();},[filters]);const fetchInquiries=async()=>{try{const params=new URLSearchParams();if(filters.status)params.append('status',filters.status);if(filters.startDate)params.append('startDate',filters.startDate);if(filters.endDate)params.append('endDate',filters.endDate);if(filters.search)params.append('search',filters.search);const response=await axios.get(\"/api/inquiries?\".concat(params.toString()));setInquiries(response.data.inquiries||[]);setFields(response.data.fields||[]);}catch(error){console.error('Failed to fetch inquiries:',error);}finally{setLoading(false);}};const fetchFields=async()=>{try{const response=await axios.get('/api/fields');setFields(response.data.fields||[]);if(visibleFields.length===0){const allFieldIds=response.data.fields.map(f=>f.id);setVisibleFields(allFieldIds);setFieldOrder(allFieldIds);}}catch(error){console.error('Failed to fetch fields:',error);}};const loadPreferences=async()=>{try{const response=await axios.get('/api/settings/preferences');if(response.data.preferences){setVisibleFields(response.data.preferences.visibleFields||[]);setFieldOrder(response.data.preferences.fieldOrder||[]);if(response.data.preferences.standardColumns){// Migrate created_at to inquiry_date for backward compatibility\nconst columns=_objectSpread({},response.data.preferences.standardColumns);if(columns.created_at!==undefined&&columns.inquiry_date===undefined){columns.inquiry_date=columns.created_at;delete columns.created_at;}setStandardColumns(columns);}if(response.data.preferences.standardColumnOrder){setStandardColumnOrder(response.data.preferences.standardColumnOrder);}}}catch(error){console.error('Failed to load preferences:',error);}};const savePreferences=async()=>{try{await axios.post('/api/settings/preferences',{visibleFields,fieldOrder,standardColumns,standardColumnOrder});}catch(error){console.error('Failed to save preferences:',error);}};useEffect(()=>{// Only admin can save preferences\nif((user===null||user===void 0?void 0:user.role)!=='admin'){return;}const timeoutId=setTimeout(()=>{if(visibleFields.length>0||Object.keys(standardColumns).length>0){savePreferences();}},500);// Debounce saves\nreturn()=>clearTimeout(timeoutId);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[visibleFields,fieldOrder,standardColumns,standardColumnOrder]);const applyFilters=()=>{fetchInquiries();};const handleDelete=async id=>{if(!window.confirm('Are you sure you want to delete this inquiry?'))return;try{await axios.delete(\"/api/inquiries/\".concat(id));fetchInquiries();}catch(error){alert('Failed to delete inquiry');}};const handleExport=async function(){let format=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'xlsx';try{const params=new URLSearchParams();if(filters.status)params.append('status',filters.status);if(filters.startDate)params.append('startDate',filters.startDate);if(filters.endDate)params.append('endDate',filters.endDate);params.append('format',format);const response=await axios.get(\"/api/reports/export?\".concat(params.toString()),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"inquiries_\".concat(new Date().toISOString().split('T')[0],\".\").concat(format));document.body.appendChild(link);link.click();link.remove();}catch(error){alert('Failed to export data');}};const toggleFieldVisibility=fieldId=>{// Only admin can change visibility\nif((user===null||user===void 0?void 0:user.role)!=='admin'){alert('Only administrators can change column visibility. Please contact your admin.');return;}if(visibleFields.includes(fieldId)){setVisibleFields(visibleFields.filter(id=>id!==fieldId));}else{setVisibleFields([...visibleFields,fieldId]);}};const onDragEnd=result=>{// Only admin can reorder fields\nif((user===null||user===void 0?void 0:user.role)!=='admin'){return;}if(!result.destination)return;// Handle standard columns drag\nif(result.droppableId==='standard-columns'){// Extract the colKey from draggableId (format: \"standard-{colKey}\")\nconst sourceColKey=result.draggableId.replace('standard-','');const destColKey=standardColumnOrder[result.destination.index];const items=Array.from(standardColumnOrder);const sourceIndex=items.indexOf(sourceColKey);const destIndex=items.indexOf(destColKey);if(sourceIndex!==-1&&destIndex!==-1){const[reorderedItem]=items.splice(sourceIndex,1);items.splice(destIndex,0,reorderedItem);setStandardColumnOrder(items);}}// Handle custom fields drag\nelse if(result.droppableId==='fields'){// Extract field ID from draggableId (format: \"field-{id}\")\nconst sourceFieldId=parseInt(result.draggableId.replace('field-',''));// Sort all fields by fieldOrder to match indices\nconst allFieldsSorted=[...fields].sort((a,b)=>{const aIndex=fieldOrder.indexOf(a.id);const bIndex=fieldOrder.indexOf(b.id);if(aIndex===-1)return 1;if(bIndex===-1)return-1;return aIndex-bIndex;});const destFieldId=allFieldsSorted[result.destination.index].id;// Get current fieldOrder array (all fields, not just visible)\nconst currentOrder=fieldOrder.length>0?fieldOrder:fields.map(f=>f.id);// Find indices in the full order array\nconst sourceIndex=currentOrder.indexOf(sourceFieldId);const destIndex=currentOrder.indexOf(destFieldId);if(sourceIndex!==-1&&destIndex!==-1){const items=Array.from(currentOrder);const[reorderedItem]=items.splice(sourceIndex,1);items.splice(destIndex,0,reorderedItem);setFieldOrder(items);}}};const getSortedFields=()=>{return fields.filter(f=>visibleFields.includes(f.id)).sort((a,b)=>{const aIndex=fieldOrder.indexOf(a.id);const bIndex=fieldOrder.indexOf(b.id);if(aIndex===-1)return 1;if(bIndex===-1)return-1;return aIndex-bIndex;});};const handleSort=column=>{let direction='asc';if(sortConfig.column===column&&sortConfig.direction==='asc'){direction='desc';}setSortConfig({column,direction});};const getSortValue=(inquiry,column,fieldsList)=>{// Standard columns\nif(column==='id')return inquiry.id||0;if(column==='client_name')return(inquiry.client_name||'').toLowerCase();if(column==='client_email')return(inquiry.client_email||'').toLowerCase();if(column==='client_phone')return inquiry.client_phone||'';if(column==='status')return inquiry.status||'';if(column==='inquiry_date'){const date=inquiry.inquiry_date||inquiry.created_at;return date?new Date(date).getTime():0;}// Custom field columns (column is field id as string)\nconst fieldId=parseInt(column);if(!isNaN(fieldId)){const field=fieldsList.find(f=>f.id===fieldId);if(field&&inquiry.customFieldValues){const value=inquiry.customFieldValues[fieldId]||'';if(field.field_type==='number'){return parseFloat(value)||0;}if(field.field_type==='date'){return value?new Date(value).getTime():0;}return(value||'').toLowerCase();}}return'';};const getSortedInquiries=(inquiriesList,fieldsList)=>{if(!sortConfig.column)return inquiriesList;return[...inquiriesList].sort((a,b)=>{const aValue=getSortValue(a,sortConfig.column,fieldsList);const bValue=getSortValue(b,sortConfig.column,fieldsList);if(aValue<bValue)return sortConfig.direction==='asc'?-1:1;if(aValue>bValue)return sortConfig.direction==='asc'?1:-1;return 0;});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading inquiries...\"});}const sortedFields=getSortedFields();// Pass all fields (not just sorted/visible) for sorting to work with all custom fields\nconst sortedInquiries=getSortedInquiries(inquiries,fields);// Get ordered and visible standard columns\nconst getOrderedStandardColumns=()=>{return standardColumnOrder.filter(colKey=>standardColumns[colKey]);};const orderedStandardColumns=getOrderedStandardColumns();const SortableHeader=_ref=>{let{column,children,fieldId=null}=_ref;const columnKey=fieldId?fieldId.toString():column;const isActive=sortConfig.column===columnKey;return/*#__PURE__*/_jsx(\"th\",{className:isActive?'sortable-header active':'sortable-header',onClick:()=>handleSort(columnKey),style:{cursor:'pointer',userSelect:'none'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'5px'},children:[/*#__PURE__*/_jsx(\"span\",{children:children}),isActive?sortConfig.direction==='asc'?/*#__PURE__*/_jsx(FiChevronUp,{}):/*#__PURE__*/_jsx(FiChevronDown,{}):/*#__PURE__*/_jsx(\"span\",{style:{opacity:0.3,fontSize:'12px'},children:\"\\u21C5\"})]})});};// Column label mapping\nconst columnLabels={id:'ID',client_name:'Client Name',client_email:'Email',client_phone:'Phone',status:'Status',inquiry_date:'Inquiry Date',actions:'Actions'};return/*#__PURE__*/_jsxs(\"div\",{className:\"inquiries-container\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-brand\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Inquiry Master\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-user\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"nav-link\",children:\"Dashboard\"}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/settings\",className:\"nav-link\",children:\"Settings\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"nav-link\",children:\"Admin\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inquiries-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inquiries-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Client Inquiries\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowFieldsConfig(!showFieldsConfig),className:\"btn-secondary\",title:\"Configure columns (Admin only)\",children:[/*#__PURE__*/_jsx(FiSettings,{}),\" \",showFieldsConfig?'Hide':'Show',\" Columns\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleExport('xlsx'),className:\"btn-secondary\",children:[/*#__PURE__*/_jsx(FiDownload,{}),\" Export Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleExport('csv'),className:\"btn-secondary\",children:[/*#__PURE__*/_jsx(FiDownload,{}),\" Export CSV\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowForm(true),className:\"btn-primary\",children:[/*#__PURE__*/_jsx(FiPlus,{}),\" Add Inquiry\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.status,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{status:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"new\",children:\"New\"}),/*#__PURE__*/_jsx(\"option\",{value:\"contacted\",children:\"Contacted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"quoted\",children:\"Quoted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"won\",children:\"Won\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lost\",children:\"Lost\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filters.startDate,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{startDate:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filters.endDate,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{endDate:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search inquiries...\",value:filters.search,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{search:e.target.value}))})]})]}),showFieldsConfig&&(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(\"div\",{className:\"fields-config\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fields-config-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Configure Visible Columns (Admin Only)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-badge\",children:\"Admin Controls\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFieldsConfig(false),className:\"close-config-btn\",children:/*#__PURE__*/_jsx(FiX,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-notice\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" Changes here will apply to all users in the system.\"]}),/*#__PURE__*/_jsxs(DragDropContext,{onDragEnd:onDragEnd,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"columns-config-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Standard Columns (Drag to reorder)\"}),/*#__PURE__*/_jsx(Droppable,{droppableId:\"standard-columns\",children:provided=>/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},provided.droppableProps),{},{ref:provided.innerRef,className:\"fields-list\",children:[standardColumnOrder.map((colKey,index)=>{const columnLabels={id:'ID',client_name:'Client Name',client_email:'Email',client_phone:'Phone',status:'Status',inquiry_date:'Inquiry Date',actions:'Actions'};const label=columnLabels[colKey]||colKey;const isVisible=standardColumns[colKey];// Ensure draggableId is a string and unique\nconst draggableId=\"standard-\".concat(colKey);return/*#__PURE__*/_jsx(Draggable,{draggableId:draggableId,index:index,children:(provided,snapshot)=>/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),{},{className:\"field-item \".concat(snapshot.isDragging?'dragging':''),children:[/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},provided.dragHandleProps),{},{className:\"drag-handle\",children:\"\\u2630\"})),/*#__PURE__*/_jsxs(\"label\",{style:{flex:1,margin:0,cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isVisible,onChange:e=>{if((user===null||user===void 0?void 0:user.role)!=='admin')return;setStandardColumns(_objectSpread(_objectSpread({},standardColumns),{},{[colKey]:e.target.checked}));savePreferences();},disabled:(user===null||user===void 0?void 0:user.role)!=='admin',onClick:e=>e.stopPropagation()}),/*#__PURE__*/_jsx(\"span\",{children:label})]})]}))},colKey);}),provided.placeholder]}))})]}),fields.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"columns-config-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Custom Fields (Drag to reorder)\"}),/*#__PURE__*/_jsx(Droppable,{droppableId:\"fields\",children:provided=>{// Sort all fields by fieldOrder (matching Settings page pattern)\nconst allFieldsSorted=[...fields].sort((a,b)=>{const aIndex=fieldOrder.indexOf(a.id);const bIndex=fieldOrder.indexOf(b.id);if(aIndex===-1)return 1;if(bIndex===-1)return-1;return aIndex-bIndex;});return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},provided.droppableProps),{},{ref:provided.innerRef,className:\"fields-list\",children:[allFieldsSorted.map((field,index)=>{const isVisible=visibleFields.includes(field.id);// Ensure draggableId is a string and unique\nconst draggableId=\"field-\".concat(field.id);return/*#__PURE__*/_jsx(Draggable,{draggableId:draggableId,index:index,children:(provided,snapshot)=>/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),{},{className:\"field-item \".concat(snapshot.isDragging?'dragging':''),children:[/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},provided.dragHandleProps),{},{className:\"drag-handle\",children:\"\\u2630\"})),/*#__PURE__*/_jsx(\"span\",{children:field.field_label}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleFieldVisibility(field.id),className:\"toggle-btn \".concat(isVisible?'visible':''),title:isVisible?'Hide column':'Show column',children:isVisible?/*#__PURE__*/_jsx(FiEye,{}):/*#__PURE__*/_jsx(FiEyeOff,{})})]}))},field.id);}),provided.placeholder]}));}})]})]}),fields.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-custom-fields\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"No custom fields yet. \",(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(Link,{to:\"/admin\",children:\"Create custom fields in Admin Dashboard\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"inquiries-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"inquiries-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[orderedStandardColumns.filter(colKey=>colKey!=='actions').map(colKey=>/*#__PURE__*/_jsx(SortableHeader,{column:colKey,children:columnLabels[colKey]},colKey)),sortedFields.map(field=>/*#__PURE__*/_jsx(SortableHeader,{column:field.id.toString(),fieldId:field.id,children:field.field_label},field.id)),standardColumns.actions&&/*#__PURE__*/_jsx(\"th\",{children:columnLabels['actions']},\"actions\")]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedInquiries.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:orderedStandardColumns.length+sortedFields.length,className:\"no-data\",children:\"No inquiries found\"})}):sortedInquiries.map(inquiry=>/*#__PURE__*/_jsx(InquiryRow,{inquiry:inquiry,fields:sortedFields,standardColumns:standardColumns,orderedStandardColumns:orderedStandardColumns,onEdit:()=>{setEditingInquiry(inquiry);setShowForm(true);},onDelete:()=>handleDelete(inquiry.id)},inquiry.id))})]})})]}),showForm&&/*#__PURE__*/_jsx(InquiryForm,{inquiry:editingInquiry,fields:fields,onClose:()=>{setShowForm(false);setEditingInquiry(null);},onSave:()=>{fetchInquiries();setShowForm(false);setEditingInquiry(null);}})]});};// Helper function to format date as dd-mm-yyyy\nconst formatDate=dateString=>{if(!dateString)return'-';const date=new Date(dateString);if(isNaN(date.getTime()))return'-';const day=String(date.getDate()).padStart(2,'0');const month=String(date.getMonth()+1).padStart(2,'0');const year=date.getFullYear();return\"\".concat(day,\"-\").concat(month,\"-\").concat(year);};const InquiryRow=_ref2=>{let{inquiry,fields,standardColumns,orderedStandardColumns,onEdit,onDelete}=_ref2;const[fieldValues,setFieldValues]=useState({});useEffect(()=>{loadFieldValues();},[inquiry.id,fields]);const loadFieldValues=async()=>{try{var _response$data$inquir;const response=await axios.get(\"/api/inquiries/\".concat(inquiry.id));const values={};(_response$data$inquir=response.data.inquiry.customFields)===null||_response$data$inquir===void 0?void 0:_response$data$inquir.forEach(cf=>{values[cf.field_id]=cf.field_value;});setFieldValues(values);}catch(error){console.error('Failed to load field values:',error);}};const getStatusBadgeClass=status=>{const classes={new:'status-new',contacted:'status-contacted',quoted:'status-quoted',won:'status-won',lost:'status-lost',cancelled:'status-cancelled'};return classes[status]||'';};return/*#__PURE__*/_jsxs(\"tr\",{children:[orderedStandardColumns.filter(colKey=>colKey!=='actions').map(colKey=>{if(colKey==='id'){return/*#__PURE__*/_jsx(\"td\",{children:inquiry.id},colKey);}if(colKey==='client_name'){return/*#__PURE__*/_jsx(\"td\",{children:inquiry.client_name},colKey);}if(colKey==='client_email'){return/*#__PURE__*/_jsx(\"td\",{children:inquiry.client_email},colKey);}if(colKey==='client_phone'){return/*#__PURE__*/_jsx(\"td\",{children:inquiry.client_phone||'-'},colKey);}if(colKey==='status'){return/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(getStatusBadgeClass(inquiry.status)),children:inquiry.status})},colKey);}if(colKey==='inquiry_date'){return/*#__PURE__*/_jsx(\"td\",{children:formatDate(inquiry.inquiry_date||inquiry.created_at)},colKey);}return null;}),fields.map(field=>{const value=fieldValues[field.id]||'';// Format date fields as dd-mm-yyyy\nconst displayValue=field.field_type==='date'&&value?formatDate(value):value;return/*#__PURE__*/_jsx(\"td\",{children:displayValue||'-'},field.id);}),standardColumns.actions&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onEdit,className:\"btn-icon\",title:\"Edit\",children:/*#__PURE__*/_jsx(FiEdit,{})}),/*#__PURE__*/_jsx(\"button\",{onClick:onDelete,className:\"btn-icon btn-danger\",title:\"Delete\",children:/*#__PURE__*/_jsx(FiTrash2,{})})]})},\"actions\")]});};export default InquiriesList;","map":{"version":3,"names":["React","useState","useEffect","Link","DragDropContext","Droppable","Draggable","axios","useAuth","FiPlus","FiDownload","FiEdit","FiTrash2","FiEye","FiEyeOff","FiX","FiSettings","FiChevronUp","FiChevronDown","InquiryForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InquiriesList","user","inquiries","setInquiries","fields","setFields","loading","setLoading","showForm","setShowForm","editingInquiry","setEditingInquiry","filters","setFilters","status","startDate","endDate","search","visibleFields","setVisibleFields","fieldOrder","setFieldOrder","showFieldsConfig","setShowFieldsConfig","standardColumns","setStandardColumns","id","client_name","client_email","client_phone","inquiry_date","actions","standardColumnKeys","standardColumnOrder","setStandardColumnOrder","sortConfig","setSortConfig","column","direction","fetchInquiries","fetchFields","loadPreferences","applyFilters","params","URLSearchParams","append","response","get","concat","toString","data","error","console","length","allFieldIds","map","f","preferences","columns","_objectSpread","created_at","undefined","savePreferences","post","role","timeoutId","setTimeout","Object","keys","clearTimeout","handleDelete","window","confirm","delete","alert","handleExport","format","arguments","responseType","url","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","Date","toISOString","split","body","appendChild","click","remove","toggleFieldVisibility","fieldId","includes","filter","onDragEnd","result","destination","droppableId","sourceColKey","draggableId","replace","destColKey","index","items","Array","from","sourceIndex","indexOf","destIndex","reorderedItem","splice","sourceFieldId","parseInt","allFieldsSorted","sort","a","b","aIndex","bIndex","destFieldId","currentOrder","getSortedFields","handleSort","getSortValue","inquiry","fieldsList","toLowerCase","date","getTime","isNaN","field","find","customFieldValues","value","field_type","parseFloat","getSortedInquiries","inquiriesList","aValue","bValue","className","children","sortedFields","sortedInquiries","getOrderedStandardColumns","colKey","orderedStandardColumns","SortableHeader","_ref","columnKey","isActive","onClick","style","cursor","userSelect","display","alignItems","gap","opacity","fontSize","columnLabels","to","title","onChange","e","target","type","placeholder","provided","droppableProps","ref","innerRef","label","isVisible","snapshot","draggableProps","isDragging","dragHandleProps","flex","margin","checked","disabled","stopPropagation","field_label","colSpan","InquiryRow","onEdit","onDelete","onClose","onSave","formatDate","dateString","day","String","getDate","padStart","month","getMonth","year","getFullYear","_ref2","fieldValues","setFieldValues","loadFieldValues","_response$data$inquir","values","customFields","forEach","cf","field_id","field_value","getStatusBadgeClass","classes","new","contacted","quoted","won","lost","cancelled","displayValue"],"sources":["/var/www/html/internal/frontend/src/components/Inquiries/InquiriesList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport axios from 'axios';\nimport { useAuth } from '../../context/AuthContext';\nimport './InquiriesList.css';\nimport { FiPlus, FiDownload, FiEdit, FiTrash2, FiEye, FiEyeOff, FiX, FiSettings, FiChevronUp, FiChevronDown } from 'react-icons/fi';\nimport InquiryForm from './InquiryForm';\n\nconst InquiriesList = () => {\n  const { user } = useAuth();\n  const [inquiries, setInquiries] = useState([]);\n  const [fields, setFields] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [editingInquiry, setEditingInquiry] = useState(null);\n  const [filters, setFilters] = useState({\n    status: '',\n    startDate: '',\n    endDate: '',\n    search: ''\n  });\n  const [visibleFields, setVisibleFields] = useState([]);\n  const [fieldOrder, setFieldOrder] = useState([]);\n  const [showFieldsConfig, setShowFieldsConfig] = useState(false);\n  const [standardColumns, setStandardColumns] = useState({\n    id: true,\n    client_name: true,\n    client_email: true,\n    client_phone: true,\n    status: true,\n    inquiry_date: true,\n    actions: true\n  });\n  // Standard column order - default order\n  const standardColumnKeys = ['id', 'client_name', 'client_email', 'client_phone', 'status', 'inquiry_date', 'actions'];\n  const [standardColumnOrder, setStandardColumnOrder] = useState(standardColumnKeys);\n  const [sortConfig, setSortConfig] = useState({\n    column: null,\n    direction: 'asc' // 'asc' or 'desc'\n  });\n\n  useEffect(() => {\n    fetchInquiries();\n    fetchFields();\n    loadPreferences();\n  }, []);\n\n  useEffect(() => {\n    applyFilters();\n  }, [filters]);\n\n  const fetchInquiries = async () => {\n    try {\n      const params = new URLSearchParams();\n      if (filters.status) params.append('status', filters.status);\n      if (filters.startDate) params.append('startDate', filters.startDate);\n      if (filters.endDate) params.append('endDate', filters.endDate);\n      if (filters.search) params.append('search', filters.search);\n\n      const response = await axios.get(`/api/inquiries?${params.toString()}`);\n      setInquiries(response.data.inquiries || []);\n      setFields(response.data.fields || []);\n    } catch (error) {\n      console.error('Failed to fetch inquiries:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchFields = async () => {\n    try {\n      const response = await axios.get('/api/fields');\n      setFields(response.data.fields || []);\n      if (visibleFields.length === 0) {\n        const allFieldIds = response.data.fields.map(f => f.id);\n        setVisibleFields(allFieldIds);\n        setFieldOrder(allFieldIds);\n      }\n    } catch (error) {\n      console.error('Failed to fetch fields:', error);\n    }\n  };\n\n  const loadPreferences = async () => {\n    try {\n      const response = await axios.get('/api/settings/preferences');\n      if (response.data.preferences) {\n        setVisibleFields(response.data.preferences.visibleFields || []);\n        setFieldOrder(response.data.preferences.fieldOrder || []);\n        if (response.data.preferences.standardColumns) {\n          // Migrate created_at to inquiry_date for backward compatibility\n          const columns = { ...response.data.preferences.standardColumns };\n          if (columns.created_at !== undefined && columns.inquiry_date === undefined) {\n            columns.inquiry_date = columns.created_at;\n            delete columns.created_at;\n          }\n          setStandardColumns(columns);\n        }\n        if (response.data.preferences.standardColumnOrder) {\n          setStandardColumnOrder(response.data.preferences.standardColumnOrder);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load preferences:', error);\n    }\n  };\n\n  const savePreferences = async () => {\n    try {\n      await axios.post('/api/settings/preferences', {\n        visibleFields,\n        fieldOrder,\n        standardColumns,\n        standardColumnOrder\n      });\n    } catch (error) {\n      console.error('Failed to save preferences:', error);\n    }\n  };\n\n  useEffect(() => {\n    // Only admin can save preferences\n    if (user?.role !== 'admin') {\n      return;\n    }\n    const timeoutId = setTimeout(() => {\n      if (visibleFields.length > 0 || Object.keys(standardColumns).length > 0) {\n        savePreferences();\n      }\n    }, 500); // Debounce saves\n    return () => clearTimeout(timeoutId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visibleFields, fieldOrder, standardColumns, standardColumnOrder]);\n\n  const applyFilters = () => {\n    fetchInquiries();\n  };\n\n  const handleDelete = async (id) => {\n    if (!window.confirm('Are you sure you want to delete this inquiry?')) return;\n\n    try {\n      await axios.delete(`/api/inquiries/${id}`);\n      fetchInquiries();\n    } catch (error) {\n      alert('Failed to delete inquiry');\n    }\n  };\n\n  const handleExport = async (format = 'xlsx') => {\n    try {\n      const params = new URLSearchParams();\n      if (filters.status) params.append('status', filters.status);\n      if (filters.startDate) params.append('startDate', filters.startDate);\n      if (filters.endDate) params.append('endDate', filters.endDate);\n      params.append('format', format);\n\n      const response = await axios.get(`/api/reports/export?${params.toString()}`, {\n        responseType: 'blob'\n      });\n\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `inquiries_${new Date().toISOString().split('T')[0]}.${format}`);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n    } catch (error) {\n      alert('Failed to export data');\n    }\n  };\n\n  const toggleFieldVisibility = (fieldId) => {\n    // Only admin can change visibility\n    if (user?.role !== 'admin') {\n      alert('Only administrators can change column visibility. Please contact your admin.');\n      return;\n    }\n    if (visibleFields.includes(fieldId)) {\n      setVisibleFields(visibleFields.filter(id => id !== fieldId));\n    } else {\n      setVisibleFields([...visibleFields, fieldId]);\n    }\n  };\n\n  const onDragEnd = (result) => {\n    // Only admin can reorder fields\n    if (user?.role !== 'admin') {\n      return;\n    }\n    if (!result.destination) return;\n    // Handle standard columns drag\n    if (result.droppableId === 'standard-columns') {\n      // Extract the colKey from draggableId (format: \"standard-{colKey}\")\n      const sourceColKey = result.draggableId.replace('standard-', '');\n      const destColKey = standardColumnOrder[result.destination.index];\n      \n      const items = Array.from(standardColumnOrder);\n      const sourceIndex = items.indexOf(sourceColKey);\n      const destIndex = items.indexOf(destColKey);\n      \n      if (sourceIndex !== -1 && destIndex !== -1) {\n        const [reorderedItem] = items.splice(sourceIndex, 1);\n        items.splice(destIndex, 0, reorderedItem);\n        setStandardColumnOrder(items);\n      }\n    } \n    // Handle custom fields drag\n    else if (result.droppableId === 'fields') {\n      // Extract field ID from draggableId (format: \"field-{id}\")\n      const sourceFieldId = parseInt(result.draggableId.replace('field-', ''));\n      \n      // Sort all fields by fieldOrder to match indices\n      const allFieldsSorted = [...fields].sort((a, b) => {\n        const aIndex = fieldOrder.indexOf(a.id);\n        const bIndex = fieldOrder.indexOf(b.id);\n        if (aIndex === -1) return 1;\n        if (bIndex === -1) return -1;\n        return aIndex - bIndex;\n      });\n      \n      const destFieldId = allFieldsSorted[result.destination.index].id;\n      \n      // Get current fieldOrder array (all fields, not just visible)\n      const currentOrder = fieldOrder.length > 0 ? fieldOrder : fields.map(f => f.id);\n      \n      // Find indices in the full order array\n      const sourceIndex = currentOrder.indexOf(sourceFieldId);\n      const destIndex = currentOrder.indexOf(destFieldId);\n      \n      if (sourceIndex !== -1 && destIndex !== -1) {\n        const items = Array.from(currentOrder);\n        const [reorderedItem] = items.splice(sourceIndex, 1);\n        items.splice(destIndex, 0, reorderedItem);\n        setFieldOrder(items);\n      }\n    }\n  };\n\n\n\n  const getSortedFields = () => {\n    return fields\n      .filter(f => visibleFields.includes(f.id))\n      .sort((a, b) => {\n        const aIndex = fieldOrder.indexOf(a.id);\n        const bIndex = fieldOrder.indexOf(b.id);\n        if (aIndex === -1) return 1;\n        if (bIndex === -1) return -1;\n        return aIndex - bIndex;\n      });\n  };\n\n  const handleSort = (column) => {\n    let direction = 'asc';\n    if (sortConfig.column === column && sortConfig.direction === 'asc') {\n      direction = 'desc';\n    }\n    setSortConfig({ column, direction });\n  };\n\n  const getSortValue = (inquiry, column, fieldsList) => {\n    // Standard columns\n    if (column === 'id') return inquiry.id || 0;\n    if (column === 'client_name') return (inquiry.client_name || '').toLowerCase();\n    if (column === 'client_email') return (inquiry.client_email || '').toLowerCase();\n    if (column === 'client_phone') return inquiry.client_phone || '';\n    if (column === 'status') return inquiry.status || '';\n    if (column === 'inquiry_date') {\n      const date = inquiry.inquiry_date || inquiry.created_at;\n      return date ? new Date(date).getTime() : 0;\n    }\n    \n    // Custom field columns (column is field id as string)\n    const fieldId = parseInt(column);\n    if (!isNaN(fieldId)) {\n      const field = fieldsList.find(f => f.id === fieldId);\n      if (field && inquiry.customFieldValues) {\n        const value = inquiry.customFieldValues[fieldId] || '';\n        if (field.field_type === 'number') {\n          return parseFloat(value) || 0;\n        }\n        if (field.field_type === 'date') {\n          return value ? new Date(value).getTime() : 0;\n        }\n        return (value || '').toLowerCase();\n      }\n    }\n    \n    return '';\n  };\n\n  const getSortedInquiries = (inquiriesList, fieldsList) => {\n    if (!sortConfig.column) return inquiriesList;\n\n    return [...inquiriesList].sort((a, b) => {\n      const aValue = getSortValue(a, sortConfig.column, fieldsList);\n      const bValue = getSortValue(b, sortConfig.column, fieldsList);\n\n      if (aValue < bValue) return sortConfig.direction === 'asc' ? -1 : 1;\n      if (aValue > bValue) return sortConfig.direction === 'asc' ? 1 : -1;\n      return 0;\n    });\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading inquiries...</div>;\n  }\n\n  const sortedFields = getSortedFields();\n  // Pass all fields (not just sorted/visible) for sorting to work with all custom fields\n  const sortedInquiries = getSortedInquiries(inquiries, fields);\n\n  // Get ordered and visible standard columns\n  const getOrderedStandardColumns = () => {\n    return standardColumnOrder.filter(colKey => standardColumns[colKey]);\n  };\n  \n  const orderedStandardColumns = getOrderedStandardColumns();\n\n  const SortableHeader = ({ column, children, fieldId = null }) => {\n    const columnKey = fieldId ? fieldId.toString() : column;\n    const isActive = sortConfig.column === columnKey;\n    \n    return (\n      <th \n        className={isActive ? 'sortable-header active' : 'sortable-header'}\n        onClick={() => handleSort(columnKey)}\n        style={{ cursor: 'pointer', userSelect: 'none' }}\n      >\n        <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n          <span>{children}</span>\n          {isActive ? (\n            sortConfig.direction === 'asc' ? <FiChevronUp /> : <FiChevronDown />\n          ) : (\n            <span style={{ opacity: 0.3, fontSize: '12px' }}>⇅</span>\n          )}\n        </div>\n      </th>\n    );\n  };\n\n  // Column label mapping\n  const columnLabels = {\n    id: 'ID',\n    client_name: 'Client Name',\n    client_email: 'Email',\n    client_phone: 'Phone',\n    status: 'Status',\n    inquiry_date: 'Inquiry Date',\n    actions: 'Actions'\n  };\n\n  return (\n    <div className=\"inquiries-container\">\n      <nav className=\"navbar\">\n        <div className=\"nav-brand\">\n          <h1>Inquiry Master</h1>\n        </div>\n        <div className=\"nav-user\">\n          <Link to=\"/dashboard\" className=\"nav-link\">Dashboard</Link>\n          {user?.role === 'admin' && (\n            <>\n              <Link to=\"/settings\" className=\"nav-link\">Settings</Link>\n              <Link to=\"/admin\" className=\"nav-link\">Admin</Link>\n            </>\n          )}\n        </div>\n      </nav>\n\n      <div className=\"inquiries-content\">\n        <div className=\"inquiries-header\">\n          <h2>Client Inquiries</h2>\n          <div className=\"header-actions\">\n            {user?.role === 'admin' && (\n              <button \n                onClick={() => setShowFieldsConfig(!showFieldsConfig)} \n                className=\"btn-secondary\"\n                title=\"Configure columns (Admin only)\"\n              >\n                <FiSettings /> {showFieldsConfig ? 'Hide' : 'Show'} Columns\n              </button>\n            )}\n            <button onClick={() => handleExport('xlsx')} className=\"btn-secondary\">\n              <FiDownload /> Export Excel\n            </button>\n            <button onClick={() => handleExport('csv')} className=\"btn-secondary\">\n              <FiDownload /> Export CSV\n            </button>\n            <button onClick={() => setShowForm(true)} className=\"btn-primary\">\n              <FiPlus /> Add Inquiry\n            </button>\n          </div>\n        </div>\n\n        <div className=\"filters-section\">\n          <div className=\"filter-group\">\n            <label>Status</label>\n            <select\n              value={filters.status}\n              onChange={(e) => setFilters({ ...filters, status: e.target.value })}\n            >\n              <option value=\"\">All Status</option>\n              <option value=\"new\">New</option>\n              <option value=\"contacted\">Contacted</option>\n              <option value=\"quoted\">Quoted</option>\n              <option value=\"won\">Won</option>\n              <option value=\"lost\">Lost</option>\n              <option value=\"cancelled\">Cancelled</option>\n            </select>\n          </div>\n\n          <div className=\"filter-group\">\n            <label>Start Date</label>\n            <input\n              type=\"date\"\n              value={filters.startDate}\n              onChange={(e) => setFilters({ ...filters, startDate: e.target.value })}\n            />\n          </div>\n\n          <div className=\"filter-group\">\n            <label>End Date</label>\n            <input\n              type=\"date\"\n              value={filters.endDate}\n              onChange={(e) => setFilters({ ...filters, endDate: e.target.value })}\n            />\n          </div>\n\n          <div className=\"filter-group\">\n            <label>Search</label>\n            <input\n              type=\"text\"\n              placeholder=\"Search inquiries...\"\n              value={filters.search}\n              onChange={(e) => setFilters({ ...filters, search: e.target.value })}\n            />\n          </div>\n        </div>\n\n        {showFieldsConfig && user?.role === 'admin' && (\n          <div className=\"fields-config\">\n            <div className=\"fields-config-header\">\n              <h3>Configure Visible Columns (Admin Only)</h3>\n              <div className=\"admin-badge\">Admin Controls</div>\n              <button onClick={() => setShowFieldsConfig(false)} className=\"close-config-btn\">\n                <FiX />\n              </button>\n            </div>\n            <div className=\"admin-notice\">\n              <strong>Note:</strong> Changes here will apply to all users in the system.\n            </div>\n            \n            <DragDropContext onDragEnd={onDragEnd}>\n              <div className=\"columns-config-section\">\n                <h4>Standard Columns (Drag to reorder)</h4>\n                <Droppable droppableId=\"standard-columns\">\n                  {(provided) => (\n                    <div {...provided.droppableProps} ref={provided.innerRef} className=\"fields-list\">\n                      {standardColumnOrder.map((colKey, index) => {\n                        const columnLabels = {\n                          id: 'ID',\n                          client_name: 'Client Name',\n                          client_email: 'Email',\n                          client_phone: 'Phone',\n                          status: 'Status',\n                          inquiry_date: 'Inquiry Date',\n                          actions: 'Actions'\n                        };\n                        const label = columnLabels[colKey] || colKey;\n                        const isVisible = standardColumns[colKey];\n                        \n                        // Ensure draggableId is a string and unique\n                        const draggableId = `standard-${colKey}`;\n                        \n                        return (\n                          <Draggable key={colKey} draggableId={draggableId} index={index}>\n                            {(provided, snapshot) => (\n                              <div\n                                ref={provided.innerRef}\n                                {...provided.draggableProps}\n                                className={`field-item ${snapshot.isDragging ? 'dragging' : ''}`}\n                              >\n                                <div {...provided.dragHandleProps} className=\"drag-handle\">☰</div>\n                                <label style={{ flex: 1, margin: 0, cursor: 'pointer' }}>\n                                  <input\n                                    type=\"checkbox\"\n                                    checked={isVisible}\n                                    onChange={(e) => {\n                                      if (user?.role !== 'admin') return;\n                                      setStandardColumns({ ...standardColumns, [colKey]: e.target.checked });\n                                      savePreferences();\n                                    }}\n                                    disabled={user?.role !== 'admin'}\n                                    onClick={(e) => e.stopPropagation()}\n                                  />\n                                  <span>{label}</span>\n                                </label>\n                              </div>\n                            )}\n                          </Draggable>\n                        );\n                      })}\n                      {provided.placeholder}\n                    </div>\n                  )}\n                </Droppable>\n              </div>\n\n              {fields.length > 0 && (\n                <div className=\"columns-config-section\">\n                  <h4>Custom Fields (Drag to reorder)</h4>\n                  <Droppable droppableId=\"fields\">\n                    {(provided) => {\n                      // Sort all fields by fieldOrder (matching Settings page pattern)\n                      const allFieldsSorted = [...fields].sort((a, b) => {\n                        const aIndex = fieldOrder.indexOf(a.id);\n                        const bIndex = fieldOrder.indexOf(b.id);\n                        if (aIndex === -1) return 1;\n                        if (bIndex === -1) return -1;\n                        return aIndex - bIndex;\n                      });\n                      \n                      return (\n                        <div {...provided.droppableProps} ref={provided.innerRef} className=\"fields-list\">\n                          {allFieldsSorted.map((field, index) => {\n                            const isVisible = visibleFields.includes(field.id);\n                            // Ensure draggableId is a string and unique\n                            const draggableId = `field-${field.id}`;\n                            return (\n                              <Draggable key={field.id} draggableId={draggableId} index={index}>\n                                {(provided, snapshot) => (\n                                  <div\n                                    ref={provided.innerRef}\n                                    {...provided.draggableProps}\n                                    className={`field-item ${snapshot.isDragging ? 'dragging' : ''}`}\n                                  >\n                                    <div {...provided.dragHandleProps} className=\"drag-handle\">☰</div>\n                                    <span>{field.field_label}</span>\n                                    <button\n                                      onClick={() => toggleFieldVisibility(field.id)}\n                                      className={`toggle-btn ${isVisible ? 'visible' : ''}`}\n                                      title={isVisible ? 'Hide column' : 'Show column'}\n                                    >\n                                      {isVisible ? <FiEye /> : <FiEyeOff />}\n                                    </button>\n                                  </div>\n                                )}\n                              </Draggable>\n                            );\n                          })}\n                          {provided.placeholder}\n                        </div>\n                      );\n                    }}\n                  </Droppable>\n                </div>\n              )}\n            </DragDropContext>\n            \n            {fields.length === 0 && (\n              <div className=\"no-custom-fields\">\n                <p>No custom fields yet. {user?.role === 'admin' && (\n                  <Link to=\"/admin\">Create custom fields in Admin Dashboard</Link>\n                )}</p>\n              </div>\n            )}\n          </div>\n        )}\n\n        <div className=\"inquiries-table-wrapper\">\n          <table className=\"inquiries-table\">\n            <thead>\n              <tr>\n                {orderedStandardColumns.filter(colKey => colKey !== 'actions').map(colKey => (\n                  <SortableHeader key={colKey} column={colKey}>\n                    {columnLabels[colKey]}\n                  </SortableHeader>\n                ))}\n                {sortedFields.map(field => (\n                  <SortableHeader key={field.id} column={field.id.toString()} fieldId={field.id}>\n                    {field.field_label}\n                  </SortableHeader>\n                ))}\n                {standardColumns.actions && (\n                  <th key=\"actions\">{columnLabels['actions']}</th>\n                )}\n              </tr>\n            </thead>\n            <tbody>\n              {sortedInquiries.length === 0 ? (\n                <tr>\n                  <td colSpan={orderedStandardColumns.length + sortedFields.length} className=\"no-data\">\n                    No inquiries found\n                  </td>\n                </tr>\n              ) : (\n                sortedInquiries.map((inquiry) => (\n                  <InquiryRow\n                    key={inquiry.id}\n                    inquiry={inquiry}\n                    fields={sortedFields}\n                    standardColumns={standardColumns}\n                    orderedStandardColumns={orderedStandardColumns}\n                    onEdit={() => {\n                      setEditingInquiry(inquiry);\n                      setShowForm(true);\n                    }}\n                    onDelete={() => handleDelete(inquiry.id)}\n                  />\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {showForm && (\n        <InquiryForm\n          inquiry={editingInquiry}\n          fields={fields}\n          onClose={() => {\n            setShowForm(false);\n            setEditingInquiry(null);\n          }}\n          onSave={() => {\n            fetchInquiries();\n            setShowForm(false);\n            setEditingInquiry(null);\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\n// Helper function to format date as dd-mm-yyyy\nconst formatDate = (dateString) => {\n  if (!dateString) return '-';\n  const date = new Date(dateString);\n  if (isNaN(date.getTime())) return '-';\n  \n  const day = String(date.getDate()).padStart(2, '0');\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const year = date.getFullYear();\n  \n  return `${day}-${month}-${year}`;\n};\n\nconst InquiryRow = ({ inquiry, fields, standardColumns, orderedStandardColumns, onEdit, onDelete }) => {\n  const [fieldValues, setFieldValues] = useState({});\n\n  useEffect(() => {\n    loadFieldValues();\n  }, [inquiry.id, fields]);\n\n  const loadFieldValues = async () => {\n    try {\n      const response = await axios.get(`/api/inquiries/${inquiry.id}`);\n      const values = {};\n      response.data.inquiry.customFields?.forEach(cf => {\n        values[cf.field_id] = cf.field_value;\n      });\n      setFieldValues(values);\n    } catch (error) {\n      console.error('Failed to load field values:', error);\n    }\n  };\n\nconst getStatusBadgeClass = (status) => {\n    const classes = {\n      new: 'status-new',\n      contacted: 'status-contacted',\n      quoted: 'status-quoted',\n      won: 'status-won',\n      lost: 'status-lost',\n      cancelled: 'status-cancelled'\n    };\n    return classes[status] || '';\n  };\n\n  return (\n    <tr>\n      {orderedStandardColumns.filter(colKey => colKey !== 'actions').map(colKey => {\n        if (colKey === 'id') {\n          return <td key={colKey}>{inquiry.id}</td>;\n        }\n        if (colKey === 'client_name') {\n          return <td key={colKey}>{inquiry.client_name}</td>;\n        }\n        if (colKey === 'client_email') {\n          return <td key={colKey}>{inquiry.client_email}</td>;\n        }\n        if (colKey === 'client_phone') {\n          return <td key={colKey}>{inquiry.client_phone || '-'}</td>;\n        }\n        if (colKey === 'status') {\n          return (\n            <td key={colKey}>\n              <span className={`status-badge ${getStatusBadgeClass(inquiry.status)}`}>\n                {inquiry.status}\n              </span>\n            </td>\n          );\n        }\n        if (colKey === 'inquiry_date') {\n          return <td key={colKey}>{formatDate(inquiry.inquiry_date || inquiry.created_at)}</td>;\n        }\n        return null;\n      })}\n      {fields.map(field => {\n        const value = fieldValues[field.id] || '';\n        // Format date fields as dd-mm-yyyy\n        const displayValue = field.field_type === 'date' && value ? formatDate(value) : value;\n        return <td key={field.id}>{displayValue || '-'}</td>;\n      })}\n      {standardColumns.actions && (\n        <td key=\"actions\">\n          <div className=\"action-buttons\">\n            <button onClick={onEdit} className=\"btn-icon\" title=\"Edit\">\n              <FiEdit />\n            </button>\n            <button onClick={onDelete} className=\"btn-icon btn-danger\" title=\"Delete\">\n              <FiTrash2 />\n            </button>\n          </div>\n        </td>\n      )}\n    </tr>\n  );\n};\n\nexport default InquiriesList;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}