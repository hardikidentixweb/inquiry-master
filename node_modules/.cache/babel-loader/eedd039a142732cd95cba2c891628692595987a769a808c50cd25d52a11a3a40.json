{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import axios from'axios';import'./Dashboard.css';import{FiUsers,FiFileText,FiSettings,FiLogOut,FiBarChart2}from'react-icons/fi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const{user,logout}=useAuth();const navigate=useNavigate();const[stats,setStats]=useState({total:0,new:0,contacted:0,quoted:0,won:0});useEffect(()=>{fetchStats();},[]);const fetchStats=async()=>{try{var _response$data$status,_response$data$status2,_response$data$status3,_response$data$status4;const response=await axios.get('/api/reports/stats');setStats({total:response.data.total,new:((_response$data$status=response.data.statusCounts.find(s=>s.status==='new'))===null||_response$data$status===void 0?void 0:_response$data$status.count)||0,contacted:((_response$data$status2=response.data.statusCounts.find(s=>s.status==='contacted'))===null||_response$data$status2===void 0?void 0:_response$data$status2.count)||0,quoted:((_response$data$status3=response.data.statusCounts.find(s=>s.status==='quoted'))===null||_response$data$status3===void 0?void 0:_response$data$status3.count)||0,won:((_response$data$status4=response.data.statusCounts.find(s=>s.status==='won'))===null||_response$data$status4===void 0?void 0:_response$data$status4.count)||0});}catch(error){console.error('Failed to fetch stats:',error);}};const handleLogout=()=>{logout();navigate('/login');};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-brand\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Inquiry Master\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-user\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Welcome, \",user===null||user===void 0?void 0:user.username]}),/*#__PURE__*/_jsx(Link,{to:\"/inquiries\",className:\"nav-link\",children:\"Inquiries\"}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(Link,{to:\"/settings\",className:\"nav-link\",children:\"Settings\"}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(Link,{to:\"/admin\",className:\"nav-link\",children:[/*#__PURE__*/_jsx(FiSettings,{}),\" Admin\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"nav-link\",children:[/*#__PURE__*/_jsx(FiLogOut,{}),\" Logout\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Dashboard\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",style:{background:'#667eea'},children:/*#__PURE__*/_jsx(FiFileText,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.total}),/*#__PURE__*/_jsx(\"p\",{children:\"Total Inquiries\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",style:{background:'#f093fb'},children:/*#__PURE__*/_jsx(FiUsers,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.new}),/*#__PURE__*/_jsx(\"p\",{children:\"New Inquiries\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",style:{background:'#4facfe'},children:/*#__PURE__*/_jsx(FiBarChart2,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.contacted}),/*#__PURE__*/_jsx(\"p\",{children:\"Contacted\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",style:{background:'#43e97b'},children:/*#__PURE__*/_jsx(FiFileText,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.won}),/*#__PURE__*/_jsx(\"p\",{children:\"Won Deals\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/inquiries\",className:\"action-card\",children:[/*#__PURE__*/_jsx(FiFileText,{size:32}),/*#__PURE__*/_jsx(\"h3\",{children:\"View Inquiries\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage and filter client inquiries\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/settings\",className:\"action-card\",children:[/*#__PURE__*/_jsx(FiSettings,{size:32}),/*#__PURE__*/_jsx(\"h3\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Customize your view preferences\"})]}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(Link,{to:\"/admin\",className:\"action-card\",children:[/*#__PURE__*/_jsx(FiSettings,{size:32}),/*#__PURE__*/_jsx(\"h3\",{children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage fields and app settings\"})]})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useAuth","axios","FiUsers","FiFileText","FiSettings","FiLogOut","FiBarChart2","jsx","_jsx","jsxs","_jsxs","Dashboard","user","logout","navigate","stats","setStats","total","new","contacted","quoted","won","fetchStats","_response$data$status","_response$data$status2","_response$data$status3","_response$data$status4","response","get","data","statusCounts","find","s","status","count","error","console","handleLogout","className","children","username","to","role","onClick","style","background","size"],"sources":["/var/www/html/internal/frontend/src/components/Dashboard/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport axios from 'axios';\r\nimport './Dashboard.css';\r\nimport { FiUsers, FiFileText, FiSettings, FiLogOut, FiBarChart2 } from 'react-icons/fi';\r\n\r\nconst Dashboard = () => {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState({\r\n    total: 0,\r\n    new: 0,\r\n    contacted: 0,\r\n    quoted: 0,\r\n    won: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await axios.get('/api/reports/stats');\r\n      setStats({\r\n        total: response.data.total,\r\n        new: response.data.statusCounts.find(s => s.status === 'new')?.count || 0,\r\n        contacted: response.data.statusCounts.find(s => s.status === 'contacted')?.count || 0,\r\n        quoted: response.data.statusCounts.find(s => s.status === 'quoted')?.count || 0,\r\n        won: response.data.statusCounts.find(s => s.status === 'won')?.count || 0,\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to fetch stats:', error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <nav className=\"navbar\">\r\n        <div className=\"nav-brand\">\r\n          <h1>Inquiry Master</h1>\r\n        </div>\r\n        <div className=\"nav-user\">\r\n          <span>Welcome, {user?.username}</span>\r\n          <Link to=\"/inquiries\" className=\"nav-link\">Inquiries</Link>\r\n          {user?.role === 'admin' && (\r\n            <Link to=\"/settings\" className=\"nav-link\">Settings</Link>\r\n          )}\r\n          {user?.role === 'admin' && (\r\n            <Link to=\"/admin\" className=\"nav-link\">\r\n              <FiSettings /> Admin\r\n            </Link>\r\n          )}\r\n          <button onClick={handleLogout} className=\"nav-link\">\r\n            <FiLogOut /> Logout\r\n          </button>\r\n        </div>\r\n      </nav>\r\n\r\n      <div className=\"dashboard-content\">\r\n        <div className=\"dashboard-header\">\r\n          <h2>Dashboard</h2>\r\n        </div>\r\n\r\n        <div className=\"stats-grid\">\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\" style={{ background: '#667eea' }}>\r\n              <FiFileText />\r\n            </div>\r\n            <div className=\"stat-info\">\r\n              <h3>{stats.total}</h3>\r\n              <p>Total Inquiries</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\" style={{ background: '#f093fb' }}>\r\n              <FiUsers />\r\n            </div>\r\n            <div className=\"stat-info\">\r\n              <h3>{stats.new}</h3>\r\n              <p>New Inquiries</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\" style={{ background: '#4facfe' }}>\r\n              <FiBarChart2 />\r\n            </div>\r\n            <div className=\"stat-info\">\r\n              <h3>{stats.contacted}</h3>\r\n              <p>Contacted</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"stat-card\">\r\n            <div className=\"stat-icon\" style={{ background: '#43e97b' }}>\r\n              <FiFileText />\r\n            </div>\r\n            <div className=\"stat-info\">\r\n              <h3>{stats.won}</h3>\r\n              <p>Won Deals</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"quick-actions\">\r\n          <Link to=\"/inquiries\" className=\"action-card\">\r\n            <FiFileText size={32} />\r\n            <h3>View Inquiries</h3>\r\n            <p>Manage and filter client inquiries</p>\r\n          </Link>\r\n\r\n          <Link to=\"/settings\" className=\"action-card\">\r\n            <FiSettings size={32} />\r\n            <h3>Settings</h3>\r\n            <p>Customize your view preferences</p>\r\n          </Link>\r\n\r\n          {user?.role === 'admin' && (\r\n            <Link to=\"/admin\" className=\"action-card\">\r\n              <FiSettings size={32} />\r\n              <h3>Admin Panel</h3>\r\n              <p>Manage fields and app settings</p>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}